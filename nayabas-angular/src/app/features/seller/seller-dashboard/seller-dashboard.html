<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <h3 class="logo">üè† Seller</h3>
    <nav>
      <a routerLink="/seller/dashboard" routerLinkActive="active">Dashboard</a>
      <a routerLink="/seller/add-property">Add Property</a>
      <a routerLink="/seller/profile">Profile</a>
      <a routerLink="/logout">Logout</a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <header class="dashboard-header">
      <h2>Seller Dashboard</h2>
    </header>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="card stat-card">
        <h4>Total Properties</h4>
        <p>{{ totalProperties }}</p>
      </div>
      <div class="card stat-card">
        <h4>Total Earnings (Listed Price)</h4>
        <p>Rs. {{ totalEarnings | number }}</p>
      </div>
    </div>

    <!-- Earnings Chart -->
    <section class="card mt-4">
      <h4 class="mb-3">Earnings Overview (Monthly)</h4>
      <canvas baseChart [data]="earningsChartData" [options]="earningsChartOptions" [type]="'line'">
      </canvas>
    </section>

    <!-- Properties Table -->
    <section class="card mt-4">
      <h4 class="mb-3">My Properties</h4>

      <div *ngIf="loading" class="text-center p-3">
        <div class="spinner-border text-primary"></div>
      </div>

      <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

      <table class="table table-hover" *ngIf="!loading && properties.length > 0">
        <thead class="table-light">
          <tr>
            <th>Image</th>
            <th>Title</th>
            <th>City</th>
            <th>Price</th>
            <th>Bedrooms</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let property of properties">
            <td>
              <img [src]="getPropertyImage(property)" alt="property" class="thumb rounded"
                style="width:80px; height:60px; object-fit:cover;" />

            </td>
            <td>{{ property.title }}</td>
            <td>{{ property.city }}</td>
            <td>Rs. {{ property.price | number }}</td>
            <td>{{ property.bedrooms || '-' }}</td>
            <td>
              <a [routerLink]="['/property', property.id]" class="btn btn-sm btn-info">View</a>
              <a [routerLink]="['/seller/edit-property', property.id]" class="btn btn-sm btn-warning">Edit</a>
              <button class="btn btn-sm btn-danger" (click)="deleteProperty(property.id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="!loading && properties.length === 0" class="alert alert-info">
        No properties yet. <a routerLink="/seller/add-property">Add your first property</a>.
      </div>
    </section>
  </main>
</div>